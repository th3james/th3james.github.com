
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Saving the planet, one website at a time</title>
  <meta name="author" content="th3james">

  
  <meta name="description" content="A.K.A. &#8220;What I wish people had told me about testing&#8221; Test driven development is now widely recognised as &#8216;a good thing&#8217;, but &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://th3james.github.com">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Saving the planet, one website at a time" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Saving the planet, one website at a time</a></h1>
  
    <h2>Hi, I'm th3james. I build stuff with Coffeescript, Clientside MVC and Rails</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:th3james.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/09/25/testing-code-is-simple/">Testing Code Is Simple</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-09-25T15:39:00+01:00" pubdate data-updated="true">Sep 25<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>A.K.A. &#8220;What I wish people had told me about testing&#8221;</h3>

<p>Test driven development is now widely recognised as &#8216;a good thing&#8217;, but for developers who aren&#8217;t already practicing it already, the world of TDD can appear quite compilicated. Choosing a testing framework and assertion library, picking between factories and fixtures, deciding how to handle database state teardown, how to mock objects, what&#8217;s the correct phrasing of my tests… From the outside, the world of automated software testing can seem like more work than it&#8217;s worth.</p>

<p>These issues put me off doing diving into TDD for a long time. Having been testing for a while now, here are some of the things I wish people had told me before I started:</p>

<h2>Testing software is actually pretty simple</h2>

<p>Writing software tests consists of the following steps:</p>

<ol>
<li>Write code that interacts with the code you&#8217;re building</li>
<li>Write assertions about what you expect to happen</li>
<li>There is no step 3</li>
</ol>


<p>Let&#8217;s go through an example. Recently, I came to be working on a large client-side JavaScript application. Coming from a Ruby background and having never tested JavaScript before, I wondered what was the simplest setup I could create for testing would be. Here it is:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  // tests.js, include this on a page with your application code
</span><span class='line'>
</span><span class='line'>  /* Our testing library */
</span><span class='line'>  assert = function(result) {
</span><span class='line'>    if (!result) {
</span><span class='line'>      throw new Error("A test failed");
</span><span class='line'>    }
</span><span class='line'>  };
</span><span class='line'>  /* end of testing library */
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  /* tests */
</span><span class='line'>  // MyMathLibrary.add given 2 arguments returns their sum
</span><span class='line'>  result = MyMathLibrary.add(1, 2);
</span><span class='line'>  assert(result === 3)
</span></code></pre></td></tr></table></div></figure>


<p>That&#8217;s it. Run this in your browser, if you get an error in your console, your tests are failing. If not, congratlations, your tests are passing. The extent of our testing library is one function called assert, that throws an error when given a false value.</p>

<p>This is genuinely all you need to start practicing TDD. Write a short description of expected (but unimplemented) behavior, write some code that creates context and assert the expected state. Then write code to make it pass and repeat:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  // MyMathLibrary.multiply given 2 numbers returns the multiplication of the 2
</span><span class='line'>  result = MyMathLibrary.multiply(5,3)
</span><span class='line'>  assert(result === 15)</span></code></pre></td></tr></table></div></figure>


<h2>Just start writing tests</h2>

<p>Writing well factored, fast, maintainable tests is tricky, and a different skill from writing good code. Expect to be bad at it at first. Don&#8217;t let this put you off: One of the best things about tests is that even poorly written tests can produce a large amount of value. Just start writing tests and learn as you go.</p>

<h2>Testing is not a DSL</h2>

<p>RSpec has a lot to answer for. Most developers starting (particularly in Ruby) will initially be confronted by the &#8216;spec&#8217; style of writing tests. I think this is unfortunate, as certainly for me, and I expect for many others, it obscures the fact that tests are just code and assertions. For this reason, I would recommend when starting testing that you avoid the &#8216;spec&#8217; style syntax, and instead master the basics using the &#8216;test&#8217; or &#8216;unit&#8217; style syntax.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  # An example in Mocha.js using the 'qunit' syntax
</span><span class='line'>  test('.sum ', function(){
</span><span class='line'>    // some code goes in here
</span><span class='line'>  })</span></code></pre></td></tr></table></div></figure>


<h2>Keep your test setup simple to start</h2>

<p>When you start testing, most people will recommend a laundry list of libraries you should use to start testing. Mocking, Factories, Transaction tests… All useful features, but when you&#8217;re starting out, I&#8217;d recommend keeping to a bare minimum: a testing framework for reporting passing/failing tests and an assertion library to get better error messages. My personal picks are:</p>

<p><strong>Javascript</strong>:</p>

<ul>
<li> Testing: Mocha.js (using the qunit syntax)</li>
<li> Assertions: Chai.js (using the assert syntax)</li>
</ul>


<p><strong>Ruby</strong>:</p>

<ul>
<li> Minitest (using the unit syntax)</li>
</ul>


<p>After you&#8217;ve written tests for a little while, it should become clear why (and if) you need factories, mocking and the rest. Then is the right time to start using them.</p>

<h2>Summary</h2>

<p>Testing your code is not only the path to fewer bugs, easier maintainence and confident refactoring, it&#8217;s also hugely satisfying. As such, it&#8217;s not surprising that so much tooling and methodology has sprung up around it, and for the most part, these are good things. However, when starting testing, it&#8217;s easy to confuse these tools and processes for testing itself. I hope this serves as a call not to run before you can walk, and a reminder of the core simplicity of testing.
Regardless of how you choose to test, the most important things that you are doing it. Good luck</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/10/browserloop-remix-music-in-your-browser/">BrowserLoop: Remix Music in Your Browser</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-05-10T08:16:00+01:00" pubdate data-updated="true">May 10<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;ve just finished building a tool which let&#8217;s you remix loops of my band&#8217;s newest single. It&#8217;s build using Backbone.js and Coffeescript, and uses HTML5 audio to play back the &#8216;loops&#8217; which make up the track. It&#8217;s pretty cool, give it a try:</p>

<h3><a href="http://browserloop.barcodechannel.com">Try BrowserLoop</a></h3>

<p><a href="http://browserloop.barcodechannel.com"><img style="width: 100%;max-width: 800px;" src="http://dl.dropboxusercontent.com/u/2324263/BrowserLoop.png"/></a></p>

<p>The app works by setting up a <a href="https://github.com/th3james/browserLoop/blob/master/src/clock.coffee">Clock</a> object at the BPM of the track, which then uses setTimeout() to fire a Backbone.event for each beat, which each of the <a href="https://github.com/th3james/browserLoop/blob/master/src/views/loop_view.coffee">loops then listen to</a>. By default, HTML5 audio does not loop seamlessly, as there is a slightly delay when seeking to the beginning of an audio file, then restarting. To get around this, I load each audio file into 2 audio tags, and switch between them with a ~50ms overlap. This isn&#8217;t always completely reliable, so there is a slider to adjust this overlay at the bottom of the app</p>

<p><a href="https://github.com/th3james/browserLoop">Check out the source code on github</a></p>

<p>Unfortunately, mobile devices (iOS etc.) don&#8217;t support pre-downloading HTML5 audio and video, which means the site doesn&#8217;t work on them. This is apparently done to stop users racking up data usage on 4G, as the files are only downloaded once the user clicks play. It&#8217;s is a shame, because I&#8217;d have loved to use this on the iPad!</p>

<p>It&#8217;s also worth noting, I built this using a tool I&#8217;m developing with <a href="https://twitter.com/amulligan">@amulligan</a> to make building Backbone.js apps easier, but more on that later :-)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/30/blog-migrated/">Th3james&#8217; Blog IV: A New Home</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-30T11:07:00+00:00" pubdate data-updated="true">Mar 30<span>th</span>, 2013</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>So, posterous is dead, so I&#8217;ve been forced to move this blog to a new home. Perhaps foolishly, I&#8217;m trusting another free provider (this time, github) to host my blog. I am at least running Octopress this time, so migration should be easier.</p>

<p>Anyway, apologies for being a bit quiet on here recently, but I&#8217;ve been busy with lots of exciting stuff to do with Backbone.js which I&#8217;ll be releasing over the next few months.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/08/10/backboneviewmanager-a-backbone-extension-to-s/">Backbone.ViewManager - a Backbone Extension to Stop View Memory/binding Leaks</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-08-10T00:00:00+01:00" pubdate data-updated="true">Aug 10<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Recently when working with Backbone I discovered how easy it was to leak Backbone Views into memory by not taking care to unbind all events listeners associated with views before discarding them. This issue is discussed at length by Derick Bailey in his post about backbone &#8216;Zombie&#8217; views:&nbsp;<a href="http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/">http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/</a></p>
<p>This issue for me was particularly pronounced when swapping objects in and out of a &#8216;content&#8217; DOM element, quickly ruining my apps performance. So, I wrote a library that extends Backbone.View to help keep reference of view bindings, and dispose of them when discarding. I call it Backbone.ViewManager, take a look over on github:</p>
<p><a href="https://github.com/th3james/Backbone.ViewManager">https://github.com/th3james/Backbone.ViewManager</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/07/18/fixing-locale-issues-over-ssh-after-zsh-upgra/">Fixing Locale Issues Over SSH After Zsh Upgrade</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-07-18T00:00:00+01:00" pubdate data-updated="true">Jul 18<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I recently upgraded to the rather nice <a href="https://github.com/robbyrussell/oh-my-zsh/">OhMyZsh</a>, which I was enjoying, until SSH&#8217;ed to one of our Ubuntu servers, tabbed to auto complete, and was presented with this message:</p>
<div style="background-color: #000000; color: #00ff00; font-family: monospace; padding: 5px;"><em>-bash: warning: setlocale: LC_CTYPE: cannot change locale (en_GB.UTF-8)</em></div>
<p>&#8230; each and every time I tabbed. Needless to say, this gets pretty annoying fast.</p>
<p>I tried a few solutions on the internet, before stumbling across <a href="http://blog.andrewbeacock.com/2007/01/how-to-change-your-default-locale-on.html">this</a>&nbsp;post which pointed me towards <span style="color: #333333; font-family: monospace;">/var/lib/locales/supported.d/local.</span></p>
<p>To fix the issue, you need to add a line to that file for the locale that bash is complaining about:</p>
<div style="background-color: #000; color: #7bf163; font-family: monospace; padding: 5px;"><em>en_GB ISO-8859-1<br /> en_GB.UTF-8 UTF-8</em></div>
<p>Since UTF should be the same for each locale, we just point en_GB.UTF to UTF-8 (this is probably the same as the default locale your system has).</p>
<p>Once you&#8217;ve done that:</p>
<div style="background-color: #000; color: #7bf163; font-family: monospace; padding: 5px;"><em>sudo dpkg-reconfigure locales</em></div>
<p>Login/logout and enjoy working tab completion again.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/11/21/taking-javascript-seriously-feat-backbonejs-s/">Taking JavaScript Seriously (Feat. Backbone.js) (Slides)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-21T00:00:00+00:00" pubdate data-updated="true">Nov 21<span>st</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I gave a talk last week about &#8216;Taking JavaScript Seriously&#8217;, talking about&nbsp;why you should be taking JavaScript seriously, how to improve your JavaScript by avoiding some common pitfalls, and using Backbone.js to make larger applications easier to build and maintain.</p>
<p><a href="http://speakerdeck.com/u/th3james/p/taking-javascript-seriously-feat-backbonejs">Check out the slides on SpeakerDeck</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/09/13/understanding-undefined-in-javascript/">Understanding Undefined, Null and Testing Variable Assignment in Javascript</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-09-13T00:00:00+01:00" pubdate data-updated="true">Sep 13<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>During a code review a college suggested that we could change one of my javascript switches on an non-existant value:</p>
<p><script src="https://gist.github.com/1214594.js"></script></p>
<p>Which seemed to make sense because, since we don&#8217;t want to perform any type coercion on the null object, this should be faster.</p>
<p>However, when I reloaded the page, the comparison (previously returning true) was now returning false. Confused, I fired up the web inspector to discover this:</p>
<p><script src="https://gist.github.com/1214606.js"></script></p>
<p>Ok, so evidently <strong>null</strong> and <strong>undefined</strong> are different things, even though I&#8217;d been using them interchangeably (like many web developers, I made the mistake of diving in javascript without bothering to learn it&#8230;)</p>
<h2>Undefined and null</h2>
<p>So what exactly is the difference between the two? Undefined is the <strong>default value</strong> javascript variables take before they are assigned a value. Null, on the other hand, is the <strong>intentional absence</strong> of a value. When using ==, the types of both undefined and null coerce to false.</p>
<h2>The many meanings of undefined</h2>
<p>So, you can just do this:</p>
<p><script src="https://gist.github.com/1214616.js"></script></p>
<p>and in most cases, that will work. However, undefined is actually 3 things in javascript; a <strong>type</strong>, a <strong>value</strong> and a <strong>variable</strong>. The issue with the above code is that we&#8217;re not checking if the some_var is &#8216;undefined&#8217;, we&#8217;re checking if it&#8217;s equal to the global variable called undefined. Undefined (the variable) exists uninitialised in javascript in the global scope and like all uninitialised variables, it is set to undefined (the value). For more detail on this I highly recommend checking out <a href="http://javascriptweblog.wordpress.com/2010/08/16/understanding-undefined-and-preventing-referenceerrors/">Angus Croll&#8217;s post on the subject</a></p>
<p>The problem is, somewhere in your code or in a library, someone else could overwrite the undefined variable to be a string:</p>
<p><script src="https://gist.github.com/1214625.js"></script></p>
<p>Which would mean all your comparisons to undefined would compare to a string! There&#8217;s no good reason to do this, but given the potential for javascript variables leaking into the global scope, it&#8217;s worth not comparing to the undefined variable in case someone in a library or other javascript file has accidentally (or maliciously!) overridden it.</p>
<p>It&#8217;s worth noting that ECMA 5 forbids setting the value of undefined, but currently, only Safari enforces this.</p>
<h2>Comparing the types</h2>
<p>So if we can&#8217;t compare to the undefined variable, what should we do? Remember I said that undefined was also a type? Well, an uninitialised variable&#8217;s value is still of the <strong>type</strong> undefined. So we can use javascript&#8217;s typeof method to get the values type as a string:</p>
<p><script src="https://gist.github.com/1214638.js"></script></p>
<p>Hopefully this clears up not just how to test assignment correctly in JavaScript, but also why we do it this way.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/05/30/using-pjax-with-rails-to-ajax-navigation/">Using PJAX With Rails to AJAX Navigation</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-05-30T00:00:00+01:00" pubdate data-updated="true">May 30<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>PJAX is a javascript library which was mentioned by DHH in his Railsconf 11 keynote</p>
<p>In their own words:</p>
<p><em>pjax loads HTML from your server into the current page without a full reload. It&#8217;s ajax with real permalinks, page titles, and a working back button that fully degrades.<br /> pjax enhances the browsing experience - nothing more.</em></p>
<p><em> </em></p>
<p><em><a href="https://github.com/defunkt/jquery-pjax  " title="https://github.com/defunkt/jquery-pjax  "> <a href="https://github.com/defunkt/jquery-pjax">https://github.com/defunkt/jquery-pjax</a> </a></em></p>
<p>PJAX makes navigation much faster and feels more like using native app than a website. While only loading parts of the page through AJAX isn&#8217;t exactly a new thing, PJAX makes it easier to add it unobtrusively, with proper URLs and a working back button.</p>
<p>The project appears to be pretty new from the github page, and there isn&#8217;t a lot of documentation, so I though I&#8217;d document how I got it working with Rails 3.0</p>
<h2>Adding PJAX to your project</h2>
<p>First, you need to grab jquery.pjax.js and add it to your project (Oh, you&#8217;ll need JQuery too, but I&#8217;m guessing most of you have it anyway :-)</p>
<p>Next, add some javascript to your application.js file (or whatever your sitewide JS location is) to tell your chosen links to send using PJAX:</p>
<p><script src="https://gist.github.com/993070.js"></script></p>
<p>This code tells the browser to send all the links in ul.menu using pjax, and to load the results into the #main</p>
<p>This alone isn&#8217;t enough to make PJAX work. PJAX sends the request through AJAX, but if the response contains the &lt;html&gt; &nbsp;tag, PJAX considers it a full page response, and reloads the whole page.</p>
<p>So, to make PJAX load the returned content into #main object, you must only return the HTML fragment, without the layout around it. To do this, you simply do a render <em>:layout =&gt; false</em>. However, adding this to ever controller action soon get&#8217;s pretty tedious.</p>
<h2>Not returning a layout on PJAX requests</h2>
<p>Thankfully, PJAX helpfully adds &#8217;<em>X-PJAX = true</em>&#8217; to its request headers. So, to return all PJAX requests without the layout file, it&#8217;s simply a case of checking for the header parameter, and adding :layout =&gt; false if so.</p>
<p>I did this by hacking the Rails render method:</p>
<p><script src="https://gist.github.com/999482.js"></script></p>
<p>This was the best approach I could find to do this for all requests, if anyone knows of any better ways, let me know!</p>
<h2>That&#8217;s it!</h2>
<p>This should be all you need to do to get PJAX working in Rails 3.0, you should find that navigation on your selected elements happens using AJAX requests in supported browsers (basically anything not IE).</p>
<p>You can see it in action on my band&#8217;s website:</p>
<p><a href="http://barcodechannel.com" title="http://barcodechannel.com"> <a href="http://barcodechannel.com">http://barcodechannel.com</a></a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/05/17/styling-active-links-in-rails/">Styling Active Links in Rails</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-05-17T00:00:00+01:00" pubdate data-updated="true">May 17<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>We often want to style active links in our Rails to improve the users perception of their location in a given website. However, <em>a:active</em> is rarely sufficient when you&#8217;ve got sub menus on your site.</p>
<p>I went searching for people who&#8217;d already tackled this problem and found the post by &#8216;jammanbo&#8217; on this page:</p>
<p><a href="http://www.ruby-forum.com/topic/178087#779606" title="http://www.ruby-forum.com/topic/178087#779606">http://www.ruby-forum.com/topic/178087</a></p>
<p>jammanbo&#8217;s helper detects if the current path matches another path&#8217;s controller and action, returning &#8216;active&#8217; or &#8221; to use as the link class. While this is useful, there are many times when we want to match to a different level of specificity for links. For example, top level menus in sites I&#8217;m working on tend to match a controller, and sub menu entries to the action. Other times, we also want to match the route&#8217;s parameters.</p>
<p>Taking this into consideration, I came up with this helper:</p>
<p><script src="https://gist.github.com/976444.js"></script></p>
<p>This helper returns a string, either &#8216;active&#8217; or &#8221; depending on if the URI parameter matches. The optional second parameter defines the specificity, either</p>
<ul>
<li><strong>:action</strong> (default) match both controller and action</li>
<li><strong>:controller</strong> match just controller, or</li>
<li><strong>:complete</strong> matches all parameters in the route (except extra ?param=whatever)</li>
</ul>
<p>To use it, simply drop it into your ApplicationHelper, then start styling links with:</p>
<p><script src="https://gist.github.com/976484.js"></script></p>
<p>Have fun!</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/09/25/testing-code-is-simple/">Testing code is simple</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/10/browserloop-remix-music-in-your-browser/">BrowserLoop: Remix music in your browser</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/03/30/blog-migrated/">th3james&#8217; blog IV: A new home</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/08/10/backboneviewmanager-a-backbone-extension-to-s/">Backbone.ViewManager - A backbone extension to stop view memory/binding leaks</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/18/fixing-locale-issues-over-ssh-after-zsh-upgra/">Fixing locale issues over SSH after zsh upgrade</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - th3james -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
